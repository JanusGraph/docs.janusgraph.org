



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Indexing for Better Performance - JanusGraph</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#4caf50">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../theme/structor-menu.css">
    
      <link rel="stylesheet" href="../../theme/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="green" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#indexing-for-better-performance" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="JanusGraph" class="md-header-nav__button md-logo">
          
            <img src="../../janusgraph-logomark.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              JanusGraph
            </span>
            <span class="md-header-nav__topic">
              
                Indexing for Better Performance
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/janusgraph/janusgraph/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    JanusGraph
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="JanusGraph" class="md-nav__button md-logo">
      
        <img src="../../janusgraph-logomark.svg" width="48" height="48">
      
    </a>
    JanusGraph
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/janusgraph/janusgraph/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    JanusGraph
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      JanusGraph Basics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        JanusGraph Basics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../schema/" title="Schema and Data Modeling" class="md-nav__link">
      Schema and Data Modeling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gremlin/" title="Gremlin Query Language" class="md-nav__link">
      Gremlin Query Language
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../server/" title="JanusGraph Server" class="md-nav__link">
      JanusGraph Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployment/" title="Deployment Scenarios" class="md-nav__link">
      Deployment Scenarios
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configured-graph-factory/" title="ConfiguredGraphFactory" class="md-nav__link">
      ConfiguredGraphFactory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../multi-node/" title="Things to Consider in a Multi-Node JanusGraph Cluster" class="md-nav__link">
      Things to Consider in a Multi-Node JanusGraph Cluster
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Indexing for Better Performance
      </label>
    
    <a href="./" title="Indexing for Better Performance" class="md-nav__link md-nav__link--active">
      Indexing for Better Performance
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#graph-index" title="Graph Index" class="md-nav__link">
    Graph Index
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#composite-index" title="Composite Index" class="md-nav__link">
    Composite Index
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#index-uniqueness" title="Index Uniqueness" class="md-nav__link">
    Index Uniqueness
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mixed-index" title="Mixed Index" class="md-nav__link">
    Mixed Index
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-property-keys" title="Adding Property Keys" class="md-nav__link">
    Adding Property Keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapping-parameters" title="Mapping Parameters" class="md-nav__link">
    Mapping Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ordering" title="Ordering" class="md-nav__link">
    Ordering
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#label-constraint" title="Label Constraint" class="md-nav__link">
    Label Constraint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composite-versus-mixed-indexes" title="Composite versus Mixed Indexes" class="md-nav__link">
    Composite versus Mixed Indexes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertex-centric-indexes" title="Vertex-centric Indexes" class="md-nav__link">
    Vertex-centric Indexes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ordered-traversals" title="Ordered Traversals" class="md-nav__link">
    Ordered Traversals
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../transactions/" title="Transactions" class="md-nav__link">
      Transactions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cache/" title="JanusGraph Cache" class="md-nav__link">
      JanusGraph Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../transaction-log/" title="Transaction Log" class="md-nav__link">
      Transaction Log
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration-reference/" title="Configuration Reference" class="md-nav__link">
      Configuration Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example-config/" title="Config Example" class="md-nav__link">
      Config Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../common-questions/" title="Common Questions" class="md-nav__link">
      Common Questions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../technical-limitations/" title="Technical Limitations" class="md-nav__link">
      Technical Limitations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Storage Backends
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Storage Backends
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage-backend/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage-backend/cassandra/" title="Apache Cassandra" class="md-nav__link">
      Apache Cassandra
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage-backend/hbase/" title="Apache HBase" class="md-nav__link">
      Apache HBase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage-backend/bigtable/" title="Google Cloud Bigtable" class="md-nav__link">
      Google Cloud Bigtable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage-backend/bdb/" title="Oracle Berkeley DB Java Edition" class="md-nav__link">
      Oracle Berkeley DB Java Edition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage-backend/inmemorybackend/" title="InMemory Storage Backend" class="md-nav__link">
      InMemory Storage Backend
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Index Backends
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Index Backends
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/search-predicates/" title="Search Predicates and Data Types" class="md-nav__link">
      Search Predicates and Data Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/text-search/" title="Index Parameters and Full-Text Search" class="md-nav__link">
      Index Parameters and Full-Text Search
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/field-mapping/" title="Field Mapping" class="md-nav__link">
      Field Mapping
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/direct-index-query/" title="Direct Index Query" class="md-nav__link">
      Direct Index Query
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/elasticsearch/" title="Elasticsearch" class="md-nav__link">
      Elasticsearch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/solr/" title="Apache Solr" class="md-nav__link">
      Apache Solr
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/lucene/" title="Apache Lucene" class="md-nav__link">
      Apache Lucene
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Advanced Topics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Advanced Topics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/advschema/" title="Advanced Schema" class="md-nav__link">
      Advanced Schema
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/eventual-consistency/" title="Eventually-Consistent Storage Backends" class="md-nav__link">
      Eventually-Consistent Storage Backends
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/recovery/" title="Failure & Recovery" class="md-nav__link">
      Failure & Recovery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/index-admin/" title="Index Management" class="md-nav__link">
      Index Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/bulk-loading/" title="Bulk Loading" class="md-nav__link">
      Bulk Loading
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/partitioning/" title="Graph Partitioning" class="md-nav__link">
      Graph Partitioning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/serializer/" title="Datatype and Attribute Serializer Configuration" class="md-nav__link">
      Datatype and Attribute Serializer Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/hadoop/" title="JanusGraph with TinkerPop’s Hadoop-Gremlin" class="md-nav__link">
      JanusGraph with TinkerPop’s Hadoop-Gremlin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/monitoring/" title="Monitoring JanusGraph" class="md-nav__link">
      Monitoring JanusGraph
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/migrating/" title="Migrating from Titan" class="md-nav__link">
      Migrating from Titan
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/data-model/" title="JanusGraph Data model" class="md-nav__link">
      JanusGraph Data model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/janusgraph-bus/" title="JanusGraph Bus" class="md-nav__link">
      JanusGraph Bus
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Connecting to JanusGraph
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Connecting to JanusGraph
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting/java/" title="Using Java" class="md-nav__link">
      Using Java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting/python/" title="Using Python" class="md-nav__link">
      Using Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting/dotnet/" title="Using .Net" class="md-nav__link">
      Using .Net
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../development/" title="Development" class="md-nav__link">
      Development
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../appendices/" title="Appendices" class="md-nav__link">
      Appendices
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#graph-index" title="Graph Index" class="md-nav__link">
    Graph Index
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#composite-index" title="Composite Index" class="md-nav__link">
    Composite Index
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#index-uniqueness" title="Index Uniqueness" class="md-nav__link">
    Index Uniqueness
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mixed-index" title="Mixed Index" class="md-nav__link">
    Mixed Index
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-property-keys" title="Adding Property Keys" class="md-nav__link">
    Adding Property Keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapping-parameters" title="Mapping Parameters" class="md-nav__link">
    Mapping Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ordering" title="Ordering" class="md-nav__link">
    Ordering
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#label-constraint" title="Label Constraint" class="md-nav__link">
    Label Constraint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composite-versus-mixed-indexes" title="Composite versus Mixed Indexes" class="md-nav__link">
    Composite versus Mixed Indexes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertex-centric-indexes" title="Vertex-centric Indexes" class="md-nav__link">
    Vertex-centric Indexes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ordered-traversals" title="Ordered Traversals" class="md-nav__link">
    Ordered Traversals
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/janusgraph/janusgraph/edit/v0.2/docs/basics/index-performance.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="indexing-for-better-performance">Indexing for Better Performance</h1>
<p>JanusGraph supports two different kinds of indexing to speed up query
processing: <strong>graph indexes</strong> and <strong>vertex-centric indexes</strong>. Most graph
queries start the traversal from a list of vertices or edges that are
identified by their properties. Graph indexes make these global
retrieval operations efficient on large graphs. Vertex-centric indexes
speed up the actual traversal through the graph, in particular when
traversing through vertices with many incident edges.</p>
<h2 id="graph-index">Graph Index</h2>
<p>Graph indexes are global index structures over the entire graph which
allow efficient retrieval of vertices or edges by their properties for
sufficiently selective conditions. For instance, consider the following
queries
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="err">&#39;</span><span class="n">name</span><span class="err">&#39;</span><span class="o">,</span> <span class="err">&#39;</span><span class="n">hercules</span><span class="err">&#39;</span><span class="o">)</span>
<span class="n">g</span><span class="o">.</span><span class="na">E</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="err">&#39;</span><span class="n">reason</span><span class="err">&#39;</span><span class="o">,</span> <span class="n">textContains</span><span class="o">(</span><span class="err">&#39;</span><span class="n">loves</span><span class="err">&#39;</span><span class="o">))</span>
</pre></div>
</td></tr></table></p>
<p>The first query asks for all vertices with the name <code>hercules</code>. The
second asks for all edges where the property reason contains the word
<code>loves</code>. Without a graph index answering those queries would require a
full scan over all vertices or edges in the graph to find those that
match the given condition which is very inefficient and infeasible for
huge graphs.</p>
<p>JanusGraph distinguishes between two types of graph indexes:
<strong>composite</strong> and <strong>mixed</strong> indexes. Composite indexes are very fast and
efficient but limited to equality lookups for a particular,
previously-defined combination of property keys. Mixed indexes can be
used for lookups on any combination of indexed keys and support multiple
condition predicates in addition to equality depending on the backing
index store.</p>
<p>Both types of indexes are created through the JanusGraph management
system and the index builder returned by
<code>JanusGraphManagement.buildIndex(String, Class)</code> where the first
argument defines the name of the index and the second argument specifies
the type of element to be indexed (e.g. <code>Vertex.class</code>). The name of a
graph index must be unique. Graph indexes built against newly defined
property keys, i.e. property keys that are defined in the same
management transaction as the index, are immediately available. The same
applies to graph indexes that are constrained to a label that is created
in the same management transaction as the index. Graph indexes built
against property keys that are already in use without being constrained
to a newly created label require the execution of a <a href="../../advanced-topics/index-admin/">reindex procedure</a> to ensure that the index contains all previously
added elements. Until the reindex procedure has completed, the index
will not be available. It is encouraged to define graph indexes in the
same transaction as the initial schema.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the absence of an index, JanusGraph will default to a full graph
scan in order to retrieve the desired list of vertices. While this
produces the correct result set, the graph scan can be very
inefficient and lead to poor overall system performance in a
production environment. Enable the <code>force-index</code> configuration option
in production deployments of JanusGraph to prohibit graph scans.</p>
</div>
<h3 id="composite-index">Composite Index</h3>
<p>Composite indexes retrieve vertices or edges by one or a (fixed)
composition of multiple keys. Consider the following composite index
definitions.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">graph</span><span class="o">.</span><span class="na">tx</span><span class="o">().</span><span class="na">rollback</span><span class="o">()</span> <span class="c1">//Never create new indexes while a transaction is active</span>
<span class="n">mgmt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">openManagement</span><span class="o">()</span>
<span class="n">name</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="na">getPropertyKey</span><span class="o">(</span><span class="err">&#39;</span><span class="n">name</span><span class="err">&#39;</span><span class="o">)</span>
<span class="n">age</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="na">getPropertyKey</span><span class="o">(</span><span class="err">&#39;</span><span class="n">age</span><span class="err">&#39;</span><span class="o">)</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">buildIndex</span><span class="o">(</span><span class="err">&#39;</span><span class="n">byNameComposite</span><span class="err">&#39;</span><span class="o">,</span> <span class="n">Vertex</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">addKey</span><span class="o">(</span><span class="n">name</span><span class="o">).</span><span class="na">buildCompositeIndex</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">buildIndex</span><span class="o">(</span><span class="err">&#39;</span><span class="n">byNameAndAgeComposite</span><span class="err">&#39;</span><span class="o">,</span> <span class="n">Vertex</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">addKey</span><span class="o">(</span><span class="n">name</span><span class="o">).</span><span class="na">addKey</span><span class="o">(</span><span class="n">age</span><span class="o">).</span><span class="na">buildCompositeIndex</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>
<span class="c1">//Wait for the index to become available</span>
<span class="n">ManagementSystem</span><span class="o">.</span><span class="na">awaitGraphIndexStatus</span><span class="o">(</span><span class="n">graph</span><span class="o">,</span> <span class="err">&#39;</span><span class="n">byNameComposite</span><span class="err">&#39;</span><span class="o">).</span><span class="na">call</span><span class="o">()</span>
<span class="n">ManagementSystem</span><span class="o">.</span><span class="na">awaitGraphIndexStatus</span><span class="o">(</span><span class="n">graph</span><span class="o">,</span> <span class="err">&#39;</span><span class="n">byNameAndAgeComposite</span><span class="err">&#39;</span><span class="o">).</span><span class="na">call</span><span class="o">()</span>
<span class="c1">//Reindex the existing data</span>
<span class="n">mgmt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">openManagement</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">updateIndex</span><span class="o">(</span><span class="n">mgmt</span><span class="o">.</span><span class="na">getGraphIndex</span><span class="o">(</span><span class="s">&quot;byNameComposite&quot;</span><span class="o">),</span> <span class="n">SchemaAction</span><span class="o">.</span><span class="na">REINDEX</span><span class="o">).</span><span class="na">get</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">updateIndex</span><span class="o">(</span><span class="n">mgmt</span><span class="o">.</span><span class="na">getGraphIndex</span><span class="o">(</span><span class="s">&quot;byNameAndAgeComposite&quot;</span><span class="o">),</span> <span class="n">SchemaAction</span><span class="o">.</span><span class="na">REINDEX</span><span class="o">).</span><span class="na">get</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>
</pre></div>
</td></tr></table></p>
<p>First, two property keys <code>name</code> and <code>age</code> are already defined. Next, a
simple composite index on just the name property key is built.
JanusGraph will use this index to answer the following query.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">)</span>
</pre></div>
</td></tr></table></p>
<p>The second composite graph index includes both keys. JanusGraph will use
this index to answer the following query.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;age&#39;</span><span class="o">,</span> <span class="mi">30</span><span class="o">).</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">)</span>
</pre></div>
</td></tr></table></p>
<p>Note, that all keys of a composite graph index must be found in the
query’s equality conditions for this index to be used. For example, the
following query cannot be answered with either of the indexes because it
only contains a constraint on <code>age</code> but not <code>name</code>.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;age&#39;</span><span class="o">,</span> <span class="mi">30</span><span class="o">)</span>
</pre></div>
</td></tr></table></p>
<p>Also note, that composite graph indexes can only be used for equality
constraints like those in the queries above. The following query would
be answered with just the simple composite index defined on the <code>name</code>
key because the age constraint is not an equality constraint.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="err">&#39;</span><span class="n">name</span><span class="err">&#39;</span><span class="o">,</span> <span class="err">&#39;</span><span class="n">hercules</span><span class="err">&#39;</span><span class="o">).</span><span class="na">has</span><span class="o">(</span><span class="err">&#39;</span><span class="n">age</span><span class="err">&#39;</span><span class="o">,</span> <span class="n">inside</span><span class="o">(</span><span class="mi">20</span><span class="o">,</span> <span class="mi">50</span><span class="o">))</span>
</pre></div>
</td></tr></table></p>
<p>Composite indexes do not require configuration of an external indexing
backend and are supported through the primary storage backend. Hence,
composite index modifications are persisted through the same transaction
as graph modifications which means that those changes are atomic and/or
consistent if the underlying storage backend supports atomicity and/or
consistency.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A composite index may comprise just one or multiple keys. A composite
index with just one key is sometimes referred to as a key-index.</p>
</div>
<h4 id="index-uniqueness">Index Uniqueness</h4>
<p>Composite indexes can also be used to enforce property uniqueness in the
graph. If a composite graph index is defined as <code>unique()</code> there can be
at most one vertex or edge for any given concatenation of property
values associated with the keys of that index. For instance, to enforce
that names are unique across the entire graph the following composite
graph index would be defined.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">graph</span><span class="o">.</span><span class="na">tx</span><span class="o">().</span><span class="na">rollback</span><span class="o">()</span>  <span class="c1">//Never create new indexes while a transaction is active</span>
<span class="n">mgmt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">openManagement</span><span class="o">()</span>
<span class="n">name</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="na">getPropertyKey</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">buildIndex</span><span class="o">(</span><span class="s1">&#39;byNameUnique&#39;</span><span class="o">,</span> <span class="n">Vertex</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">addKey</span><span class="o">(</span><span class="n">name</span><span class="o">).</span><span class="na">unique</span><span class="o">().</span><span class="na">buildCompositeIndex</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>
<span class="c1">//Wait for the index to become available</span>
<span class="n">ManagementSystem</span><span class="o">.</span><span class="na">awaitGraphIndexStatus</span><span class="o">(</span><span class="n">graph</span><span class="o">,</span> <span class="s1">&#39;byNameUnique&#39;</span><span class="o">).</span><span class="na">call</span><span class="o">()</span>
<span class="c1">//Reindex the existing data</span>
<span class="n">mgmt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">openManagement</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">updateIndex</span><span class="o">(</span><span class="n">mgmt</span><span class="o">.</span><span class="na">getGraphIndex</span><span class="o">(</span><span class="s2">&quot;byNameUnique&quot;</span><span class="o">),</span> <span class="n">SchemaAction</span><span class="o">.</span><span class="na">REINDEX</span><span class="o">).</span><span class="na">get</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>
</pre></div>
</td></tr></table></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To enforce uniqueness against an eventually consistent storage
backend, the <a href="../../advanced-topics/eventual-consistency/">consistency</a> of the index must be
explicitly set to enabling locking.</p>
</div>
<h3 id="mixed-index">Mixed Index</h3>
<p>Mixed indexes retrieve vertices or edges by any combination of
previously added property keys. Mixed indexes provide more flexibility
than composite indexes and support additional condition predicates
beyond equality. On the other hand, mixed indexes are slower for most
equality queries than composite indexes.</p>
<p>Unlike composite indexes, mixed indexes require the configuration of an
<a href="../../index-backend/search-predicates/">indexing backend</a> and use that indexing backend to
execute lookup operations. JanusGraph can support multiple indexing
backends in a single installation. Each indexing backend must be
uniquely identified by name in the JanusGraph configuration which is
called the <strong>indexing backend name</strong>.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">graph</span><span class="o">.</span><span class="na">tx</span><span class="o">().</span><span class="na">rollback</span><span class="o">()</span>  <span class="c1">//Never create new indexes while a transaction is active</span>
<span class="n">mgmt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">openManagement</span><span class="o">()</span>
<span class="n">name</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="na">getPropertyKey</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span>
<span class="n">age</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="na">getPropertyKey</span><span class="o">(</span><span class="s1">&#39;age&#39;</span><span class="o">)</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">buildIndex</span><span class="o">(</span><span class="s1">&#39;nameAndAge&#39;</span><span class="o">,</span> <span class="n">Vertex</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">addKey</span><span class="o">(</span><span class="n">name</span><span class="o">).</span><span class="na">addKey</span><span class="o">(</span><span class="n">age</span><span class="o">).</span><span class="na">buildMixedIndex</span><span class="o">(</span><span class="s2">&quot;search&quot;</span><span class="o">)</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>
<span class="c1">//Wait for the index to become available</span>
<span class="n">ManagementSystem</span><span class="o">.</span><span class="na">awaitGraphIndexStatus</span><span class="o">(</span><span class="n">graph</span><span class="o">,</span> <span class="s1">&#39;nameAndAge&#39;</span><span class="o">).</span><span class="na">call</span><span class="o">()</span>
<span class="c1">//Reindex the existing data</span>
<span class="n">mgmt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">openManagement</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">updateIndex</span><span class="o">(</span><span class="n">mgmt</span><span class="o">.</span><span class="na">getGraphIndex</span><span class="o">(</span><span class="s2">&quot;nameAndAge&quot;</span><span class="o">),</span> <span class="n">SchemaAction</span><span class="o">.</span><span class="na">REINDEX</span><span class="o">).</span><span class="na">get</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>
</pre></div>
</td></tr></table></p>
<p>The example above defines a mixed index containing the property keys
<code>name</code> and <code>age</code>. The definition refers to the indexing backend name
<code>search</code> so that JanusGraph knows which configured indexing backend it
should use for this particular index. The <code>search</code> parameter specified
in the buildMixedIndex call must match the second clause in the
JanusGraph configuration definition like this: index.<strong>search</strong>.backend
If the index was named <em>solrsearch</em> then the configuration definition
would appear like this: index.<strong>solrsearch</strong>.backend.</p>
<p>The mgmt.buildIndex example specified above uses text search as its
default behavior. An index statement that explicitly defines the index
as a text index can be written as follows:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">mgmt</span><span class="o">.</span><span class="na">buildIndex</span><span class="o">(</span><span class="s1">&#39;nameAndAge&#39;</span><span class="o">,</span><span class="n">Vertex</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">addKey</span><span class="o">(</span><span class="n">name</span><span class="o">,</span><span class="n">Mapping</span><span class="o">.</span><span class="na">TEXT</span><span class="o">.</span><span class="na">getParameter</span><span class="o">()).</span><span class="na">addKey</span><span class="o">(</span><span class="n">age</span><span class="o">,</span><span class="n">Mapping</span><span class="o">.</span><span class="na">TEXT</span><span class="o">.</span><span class="na">getParameter</span><span class="o">()).</span><span class="na">buildMixedIndex</span><span class="o">(</span><span class="s2">&quot;search&quot;</span><span class="o">)</span>
</pre></div>
</td></tr></table></p>
<p>See <a href="../../index-backend/text-search/">Index Parameters and Full-Text Search</a> for more information on text and string
search options, and see the documentation section specific to the
indexing backend in use for more details on how each backend handles
text versus string searches.</p>
<p>While the index definition example looks similar to the composite index
above, it provides greater query support and can answer <em>any</em> of the
following queries.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="n">textContains</span><span class="o">(</span><span class="s1">&#39;hercules&#39;</span><span class="o">)).</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;age&#39;</span><span class="o">,</span> <span class="n">inside</span><span class="o">(</span><span class="mi">20</span><span class="o">,</span> <span class="mi">50</span><span class="o">))</span>
<span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="n">textContains</span><span class="o">(</span><span class="s1">&#39;hercules&#39;</span><span class="o">))</span>
<span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;age&#39;</span><span class="o">,</span> <span class="n">lt</span><span class="o">(</span><span class="mi">50</span><span class="o">))</span>
</pre></div>
</td></tr></table></p>
<p>Mixed indexes support full-text search, range search, geo search and
others. Refer to <a href="../../index-backend/search-predicates/">Search Predicates and Data Types</a> for a list of predicates
supported by a particular indexing backend.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unlike composite indexes, mixed indexes do not support uniqueness.</p>
</div>
<h4 id="adding-property-keys">Adding Property Keys</h4>
<p>Property keys can be added to an existing mixed index which allows
subsequent queries to include this key in the query condition.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">graph</span><span class="o">.</span><span class="na">tx</span><span class="o">().</span><span class="na">rollback</span><span class="o">()</span>  <span class="c1">//Never create new indexes while a transaction is active</span>
<span class="n">mgmt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">openManagement</span><span class="o">()</span>
<span class="n">location</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="na">makePropertyKey</span><span class="o">(</span><span class="s1">&#39;location&#39;</span><span class="o">).</span><span class="na">dataType</span><span class="o">(</span><span class="n">Geoshape</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">make</span><span class="o">()</span>
<span class="n">nameAndAge</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="na">getGraphIndex</span><span class="o">(</span><span class="s1">&#39;nameAndAge&#39;</span><span class="o">)</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">addIndexKey</span><span class="o">(</span><span class="n">nameAndAge</span><span class="o">,</span> <span class="n">location</span><span class="o">)</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>
<span class="c1">//Previously created property keys already have the status ENABLED, but</span>
<span class="c1">//our newly created property key &quot;location&quot; needs to REGISTER so we wait for both statuses</span>
<span class="n">ManagementSystem</span><span class="o">.</span><span class="na">awaitGraphIndexStatus</span><span class="o">(</span><span class="n">graph</span><span class="o">,</span> <span class="s1">&#39;nameAndAge&#39;</span><span class="o">).</span><span class="na">status</span><span class="o">(</span><span class="n">SchemaStatus</span><span class="o">.</span><span class="na">REGISTERED</span><span class="o">,</span> <span class="n">SchemaStatus</span><span class="o">.</span><span class="na">ENABLED</span><span class="o">).</span><span class="na">call</span><span class="o">()</span>
<span class="c1">//Reindex the existing data</span>
<span class="n">mgmt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">openManagement</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">updateIndex</span><span class="o">(</span><span class="n">mgmt</span><span class="o">.</span><span class="na">getGraphIndex</span><span class="o">(</span><span class="s2">&quot;nameAndAge&quot;</span><span class="o">),</span> <span class="n">SchemaAction</span><span class="o">.</span><span class="na">REINDEX</span><span class="o">).</span><span class="na">get</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>
</pre></div>
</td></tr></table></p>
<p>To add a newly defined key, we first retrieve the existing index from
the management transaction by its name and then invoke the <code>addIndexKey</code>
method to add the key to this index.</p>
<p>If the added key is defined in the same management transaction, it will
be immediately available for querying. If the property key has already
been in use, adding the key requires the execution of a <a href="../../advanced-topics/index-admin/">reindex procedure</a> to ensure that the index contains all previously
added elements. Until the reindex procedure has completed, the key will
not be available in the mixed index.</p>
<h4 id="mapping-parameters">Mapping Parameters</h4>
<p>When adding a property key to a mixed index - either through the index
builder or the <code>addIndexKey</code> method - a list of parameters can be
optionally specified to adjust how the property value is mapped into the
indexing backend. Refer to the <a href="../../index-backend/text-search/">mapping parameters
overview</a> for a complete list of parameter types supported
by each indexing backend.</p>
<h3 id="ordering">Ordering</h3>
<p>The order in which the results of a graph query are returned can be
defined using the <code>order().by()</code> directive. The <code>order().by()</code> method
expects two parameters:</p>
<ul>
<li>
<p>The name of the property key by which to order the results. The
    results will be ordered by the value of the vertices or edges for
    this property key.</p>
</li>
<li>
<p>The sort order: either increasing <code>incr</code> or decreasing <code>decr</code></p>
</li>
</ul>
<p>For example, the query
<code>g.V().has('name', textContains('hercules')).order().by('age', decr).limit(10)</code>
retrieves the ten oldest individuals with <em>hercules</em> in their name.</p>
<p>When using <code>order().by()</code> it is important to note that:</p>
<ul>
<li>
<p>Composite graph indexes do not natively support ordering search
    results. All results will be retrieved and then sorted in-memory.
    For large result sets, this can be very expensive.</p>
</li>
<li>
<p>Mixed indexes support ordering natively and efficiently. However,
    the property key used in the order().by() method must have been
    previously added to the mixed indexed for native result ordering
    support. This is important in cases where the the order().by() key
    is different from the query keys. If the property key is not part of
    the index, then sorting requires loading all results into memory.</p>
</li>
</ul>
<h3 id="label-constraint">Label Constraint</h3>
<p>In many cases it is desirable to only index vertices or edges with a
particular label. For instance, one may want to index only gods by their
name and not every single vertex that has a name property. When defining
an index it is possible to restrict the index to a particular vertex or
edge label using the <code>indexOnly</code> method of the index builder. The
following creates a composite index for the property key <code>name</code> that
indexes only vertices labeled <code>god</code>.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">graph</span><span class="o">.</span><span class="na">tx</span><span class="o">().</span><span class="na">rollback</span><span class="o">()</span>  <span class="c1">//Never create new indexes while a transaction is active</span>
<span class="n">mgmt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">openManagement</span><span class="o">()</span>
<span class="n">name</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="na">getPropertyKey</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span>
<span class="n">god</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="na">getVertexLabel</span><span class="o">(</span><span class="s1">&#39;god&#39;</span><span class="o">)</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">buildIndex</span><span class="o">(</span><span class="s1">&#39;byNameAndLabel&#39;</span><span class="o">,</span> <span class="n">Vertex</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">addKey</span><span class="o">(</span><span class="n">name</span><span class="o">).</span><span class="na">indexOnly</span><span class="o">(</span><span class="n">god</span><span class="o">).</span><span class="na">buildCompositeIndex</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>
<span class="c1">//Wait for the index to become available</span>
<span class="n">ManagementSystem</span><span class="o">.</span><span class="na">awaitGraphIndexStatus</span><span class="o">(</span><span class="n">graph</span><span class="o">,</span> <span class="s1">&#39;byNameAndLabel&#39;</span><span class="o">).</span><span class="na">call</span><span class="o">()</span>
<span class="c1">//Reindex the existing data</span>
<span class="n">mgmt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">openManagement</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">updateIndex</span><span class="o">(</span><span class="n">mgmt</span><span class="o">.</span><span class="na">getGraphIndex</span><span class="o">(</span><span class="s2">&quot;byNameAndLabel&quot;</span><span class="o">),</span> <span class="n">SchemaAction</span><span class="o">.</span><span class="na">REINDEX</span><span class="o">).</span><span class="na">get</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>
</pre></div>
</td></tr></table></p>
<p>Label restrictions similarly apply to mixed indexes. When a composite
index with label restriction is defined as unique, the uniqueness
constraint only applies to properties on vertices or edges for the
specified label.</p>
<h3 id="composite-versus-mixed-indexes">Composite versus Mixed Indexes</h3>
<ol>
<li>
<p>Use a composite index for exact match index retrievals. Composite
    indexes do not require configuring or operating an external index
    system and are often significantly faster than mixed indexes.</p>
<ol>
<li>As an exception, use a mixed index for exact matches when the
    number of distinct values for query constraint is relatively
    small or if one value is expected to be associated with many
    elements in the graph (i.e. in case of low selectivity).</li>
</ol>
</li>
<li>
<p>Use a mixed indexes for numeric range, full-text or geo-spatial
    indexing. Also, using a mixed index can speed up the order().by()
    queries.</p>
</li>
</ol>
<h2 id="vertex-centric-indexes">Vertex-centric Indexes</h2>
<p>Vertex-centric indexes are local index structures built individually per
vertex. In large graphs vertices can have thousands of incident edges.
Traversing through those vertices can be very slow because a large
subset of the incident edges has to be retrieved and then filtered in
memory to match the conditions of the traversal. Vertex-centric indexes
can speed up such traversals by using localized index structures to
retrieve only those edges that need to be traversed.</p>
<p>Suppose that Hercules battled hundreds of monsters in addition to the
three captured in the introductory <a href="../..#getting-started">Graph of the Gods</a>. Without a vertex-centric index, a query asking
for those monsters battled between time point <code>10</code> and <code>20</code> would
require retrieving all <code>battled</code> edges even though there are only a
handful of matching edges.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">h</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">).</span><span class="na">next</span><span class="o">()</span>
<span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">(</span><span class="n">h</span><span class="o">).</span><span class="na">outE</span><span class="o">(</span><span class="s1">&#39;battled&#39;</span><span class="o">).</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;time&#39;</span><span class="o">,</span> <span class="n">inside</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">20</span><span class="o">)).</span><span class="na">inV</span><span class="o">()</span>
</pre></div>
</td></tr></table></p>
<p>Building a vertex-centric index by time speeds up such traversal
queries. Note, this initial index example already exists in the <em>Graph
of the Gods</em> as an index named <code>edges</code>. As a result, running the steps
below will result in a uniqueness constraint error.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">graph</span><span class="o">.</span><span class="na">tx</span><span class="o">().</span><span class="na">rollback</span><span class="o">()</span>  <span class="c1">//Never create new indexes while a transaction is active</span>
<span class="n">mgmt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">openManagement</span><span class="o">()</span>
<span class="n">time</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="na">getPropertyKey</span><span class="o">(</span><span class="s1">&#39;time&#39;</span><span class="o">)</span>
<span class="n">battled</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="na">getEdgeLabel</span><span class="o">(</span><span class="s1">&#39;battled&#39;</span><span class="o">)</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">buildEdgeIndex</span><span class="o">(</span><span class="n">battled</span><span class="o">,</span> <span class="s1">&#39;battlesByTime&#39;</span><span class="o">,</span> <span class="n">Direction</span><span class="o">.</span><span class="na">BOTH</span><span class="o">,</span> <span class="n">Order</span><span class="o">.</span><span class="na">decr</span><span class="o">,</span> <span class="n">time</span><span class="o">)</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>
<span class="c1">//Wait for the index to become available</span>
<span class="n">ManagementSystem</span><span class="o">.</span><span class="na">awaitRelationIndexStatus</span><span class="o">(</span><span class="n">graph</span><span class="o">,</span> <span class="s1">&#39;battlesByTime&#39;</span><span class="o">).</span><span class="na">call</span><span class="o">()</span>
<span class="c1">//Reindex the existing data</span>
<span class="n">mgmt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">openManagement</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">updateIndex</span><span class="o">(</span><span class="n">mgmt</span><span class="o">.</span><span class="na">getGraphIndex</span><span class="o">(</span><span class="s2">&quot;battlesByTime&quot;</span><span class="o">),</span> <span class="n">SchemaAction</span><span class="o">.</span><span class="na">REINDEX</span><span class="o">).</span><span class="na">get</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>
</pre></div>
</td></tr></table></p>
<p>This example builds a vertex-centric index which indexes <code>battled</code> edges
in both direction by time in decreasing order. A vertex-centric index is
built against a particular edge label which is the first argument to the
index construction method <code>JanusGraphManagement.buildEdgeIndex()</code>. The
index only applies to edges of this label - <code>battled</code> in the example
above. The second argument is a unique name for the index. The third
argument is the edge direction in which the index is built. The index
will only apply to traversals along edges in this direction. In this
example, the vertex-centric index is built in both direction which means
that time restricted traversals along <code>battled</code> edges can be served by
this index in both the <code>IN</code> and <code>OUT</code> direction. JanusGraph will
maintain a vertex-centric index on both the in- and out-vertex of
<code>battled</code> edges. Alternatively, one could define the index to apply to
the <code>OUT</code> direction only which would speed up traversals from Hercules
to the monsters but not in the reverse direction. This would only
require maintaining one index and hence half the index maintenance and
storage cost. The last two arguments are the sort order of the index and
a list of property keys to index by. The sort order is optional and
defaults to ascending order (i.e. <code>Order.ASC</code>). The list of property
keys must be non-empty and defines the keys by which to index the edges
of the given label. A vertex-centric index can be defined with multiple
keys.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">graph</span><span class="o">.</span><span class="na">tx</span><span class="o">().</span><span class="na">rollback</span><span class="o">()</span>  <span class="c1">//Never create new indexes while a transaction is active</span>
<span class="n">mgmt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">openManagement</span><span class="o">()</span>
<span class="n">time</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="na">getPropertyKey</span><span class="o">(</span><span class="s1">&#39;time&#39;</span><span class="o">)</span>
<span class="n">rating</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="na">makePropertyKey</span><span class="o">(</span><span class="s1">&#39;rating&#39;</span><span class="o">).</span><span class="na">dataType</span><span class="o">(</span><span class="n">Double</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">make</span><span class="o">()</span>
<span class="n">battled</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="na">getEdgeLabel</span><span class="o">(</span><span class="s1">&#39;battled&#39;</span><span class="o">)</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">buildEdgeIndex</span><span class="o">(</span><span class="n">battled</span><span class="o">,</span> <span class="s1">&#39;battlesByRatingAndTime&#39;</span><span class="o">,</span> <span class="n">Direction</span><span class="o">.</span><span class="na">OUT</span><span class="o">,</span> <span class="n">Order</span><span class="o">.</span><span class="na">decr</span><span class="o">,</span> <span class="n">rating</span><span class="o">,</span> <span class="n">time</span><span class="o">)</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>
<span class="c1">//Wait for the index to become available</span>
<span class="n">ManagementSystem</span><span class="o">.</span><span class="na">awaitRelationIndexStatus</span><span class="o">(</span><span class="n">graph</span><span class="o">,</span> <span class="s1">&#39;battlesByRatingAndTime&#39;</span><span class="o">,</span> <span class="s1">&#39;battled&#39;</span><span class="o">).</span><span class="na">call</span><span class="o">()</span>
<span class="c1">//Reindex the existing data</span>
<span class="n">mgmt</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">openManagement</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">updateIndex</span><span class="o">(</span><span class="n">mgmt</span><span class="o">.</span><span class="na">getRelationIndex</span><span class="o">(</span><span class="n">battled</span><span class="o">,</span> <span class="s1">&#39;battlesByRatingAndTime&#39;</span><span class="o">),</span> <span class="n">SchemaAction</span><span class="o">.</span><span class="na">REINDEX</span><span class="o">).</span><span class="na">get</span><span class="o">()</span>
<span class="n">mgmt</span><span class="o">.</span><span class="na">commit</span><span class="o">()</span>
</pre></div>
</td></tr></table></p>
<p>This example extends the schema by a <code>rating</code> property on <code>battled</code>
edges and builds a vertex-centric index which indexes <code>battled</code> edges in
the out-going direction by rating and time in decreasing order. Note,
that the order in which the property keys are specified is important
because vertex-centric indexes are prefix indexes. This means, that
<code>battled</code> edges are indexed by <code>rating</code> <em>first</em> and <code>time</code> <em>second</em>.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">h</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">).</span><span class="na">next</span><span class="o">()</span>
<span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">(</span><span class="n">h</span><span class="o">).</span><span class="na">outE</span><span class="o">(</span><span class="s1">&#39;battled&#39;</span><span class="o">).</span><span class="na">property</span><span class="o">(</span><span class="s1">&#39;rating&#39;</span><span class="o">,</span> <span class="mf">5.0</span><span class="o">)</span> <span class="c1">//Add some rating properties</span>
<span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">(</span><span class="n">h</span><span class="o">).</span><span class="na">outE</span><span class="o">(</span><span class="s1">&#39;battled&#39;</span><span class="o">).</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;rating&#39;</span><span class="o">,</span> <span class="n">gt</span><span class="o">(</span><span class="mf">3.0</span><span class="o">)).</span><span class="na">inV</span><span class="o">()</span>
<span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">(</span><span class="n">h</span><span class="o">).</span><span class="na">outE</span><span class="o">(</span><span class="s1">&#39;battled&#39;</span><span class="o">).</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;rating&#39;</span><span class="o">,</span> <span class="mf">5.0</span><span class="o">).</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;time&#39;</span><span class="o">,</span> <span class="n">inside</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">50</span><span class="o">)).</span><span class="na">inV</span><span class="o">()</span>
<span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">(</span><span class="n">h</span><span class="o">).</span><span class="na">outE</span><span class="o">(</span><span class="s1">&#39;battled&#39;</span><span class="o">).</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;time&#39;</span><span class="o">,</span> <span class="n">inside</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">50</span><span class="o">)).</span><span class="na">inV</span><span class="o">()</span>
</pre></div>
</td></tr></table></p>
<p>Hence, the <code>battlesByRatingAndTime</code> index can speed up the first two but
not the third query.</p>
<p>Multiple vertex-centric indexes can be built for the same edge label in
order to support different constraint traversals. JanusGraph’s query
optimizer attempts to pick the most efficient index for any given
traversal. Vertex-centric indexes only support equality and
range/interval constraints.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The property keys used in a vertex-centric index must have an
explicitly defined data type (i.e. <em>not</em> <code>Object.class</code>) which
supports a native sort order.</p>
</div>
<p>If the vertex-centric index is built against an edge label that is
defined in the same management transaction, the index will be
immediately available for querying. If the edge label has already been
in use, building a vertex-centric index against it requires the
execution of a <a href="../../advanced-topics/index-admin/">reindex procedure</a> to ensure that the index
contains all previously added edges. Until the reindex procedure has
completed, the index will not be available.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>JanusGraph automatically builds vertex-centric indexes per edge label
and property key. That means, even with thousands of incident
<code>battled</code> edges, queries like <code>g.V(h).out('mother')</code> or
<code>g.V(h).values('age')</code> are efficiently answered by the local index.</p>
</div>
<p>Vertex-centric indexes cannot speed up unconstrained traversals which
require traversing through all incident edges of a particular label.
Those traversals will become slower as the number of incident edges
increases. Often, such traversals can be rewritten as constrained
traversals that can utilize a vertex-centric index to ensure acceptable
performance at scale.</p>
<h3 id="ordered-traversals">Ordered Traversals</h3>
<p>The following queries specify an order in which the incident edges are
to be traversed. Use the <code>localLimit</code> command to retrieve a subset of
the edges (in a given order) for EACH vertex that is traversed.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">h</span> <span class="o">=</span> <span class="n">g</span><span class="o">..</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">).</span><span class="na">next</span><span class="o">()</span>
<span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">(</span><span class="n">h</span><span class="o">).</span><span class="na">local</span><span class="o">(</span><span class="n">outE</span><span class="o">(</span><span class="s1">&#39;battled&#39;</span><span class="o">).</span><span class="na">order</span><span class="o">().</span><span class="na">by</span><span class="o">(</span><span class="s1">&#39;time&#39;</span><span class="o">,</span> <span class="n">decr</span><span class="o">).</span><span class="na">limit</span><span class="o">(</span><span class="mi">10</span><span class="o">)).</span><span class="na">inV</span><span class="o">().</span><span class="na">values</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span>
<span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">(</span><span class="n">h</span><span class="o">).</span><span class="na">local</span><span class="o">(</span><span class="n">outE</span><span class="o">(</span><span class="s1">&#39;battled&#39;</span><span class="o">).</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;rating&#39;</span><span class="o">,</span> <span class="mf">5.0</span><span class="o">).</span><span class="na">order</span><span class="o">().</span><span class="na">by</span><span class="o">(</span><span class="s1">&#39;time&#39;</span><span class="o">,</span> <span class="n">decr</span><span class="o">).</span><span class="na">limit</span><span class="o">(</span><span class="mi">10</span><span class="o">)).</span><span class="na">values</span><span class="o">(</span><span class="s1">&#39;place&#39;</span><span class="o">)</span>
</pre></div>
</td></tr></table></p>
<p>The first query asks for the names of the 10 most recently battled
monsters by Hercules. The second query asks for the places of the 10
most recent battles of Hercules that are rated 5 stars. In both cases,
the query is constrained by an order on a property key with a limit on
the number of elements to be returned.</p>
<p>Such queries can also be efficiently answered by vertex-centric indexes
if the order key matches the key of the index and the requested order
(i.e. increasing or decreasing) is the same as the one defined for the
index. The <code>battlesByTime</code> index would be used to answer the first query
and <code>battlesByRatingAndTime</code> applies to the second. Note, that the
<code>battlesByRatingAndTime</code> index cannot be used to answer the first query
because an equality constraint on <code>rating</code> must be present for the
second key in the index to be effective.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ordered vertex queries are a JanusGraph extension to Gremlin which
causes the verbose syntax and requires the <code>_()</code> step to convert the
JanusGraph result back into a Gremlin pipeline.</p>
</div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../multi-node/" title="Things to Consider in a Multi-Node JanusGraph Cluster" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Things to Consider in a Multi-Node JanusGraph Cluster
              </span>
            </div>
          </a>
        
        
          <a href="../transactions/" title="Transactions" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Transactions
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 JanusGraph Authors. All rights reserved.<br> The Linux Foundation has registered trademarks and uses trademarks. For a list of<br> trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage">Trademark Usage</a> page.<br> Cassandra, Groovy, HBase, Hadoop, Lucene, Solr, and TinkerPop are trademarks of the Apache Software Foundation.<br> Berkeley DB and Berkeley DB Java Edition are trademarks of Oracle.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../theme/js/structor-menu.js"></script>
      
    
  </body>
</html>