



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Gremlin Query Language - JanusGraph</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#4caf50">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../theme/structor-menu.css">
    
      <link rel="stylesheet" href="../../theme/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="green" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#gremlin-query-language" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="JanusGraph" class="md-header-nav__button md-logo">
          
            <img src="../../janusgraph-logomark.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              JanusGraph
            </span>
            <span class="md-header-nav__topic">
              
                Gremlin Query Language
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/janusgraph/janusgraph/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    JanusGraph
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="JanusGraph" class="md-nav__button md-logo">
      
        <img src="../../janusgraph-logomark.svg" width="48" height="48">
      
    </a>
    JanusGraph
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/janusgraph/janusgraph/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    JanusGraph
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      JanusGraph Basics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        JanusGraph Basics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../schema/" title="Schema and Data Modeling" class="md-nav__link">
      Schema and Data Modeling
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Gremlin Query Language
      </label>
    
    <a href="./" title="Gremlin Query Language" class="md-nav__link md-nav__link--active">
      Gremlin Query Language
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introductory-traversals" title="Introductory Traversals" class="md-nav__link">
    Introductory Traversals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iterating-the-traversal" title="Iterating the Traversal" class="md-nav__link">
    Iterating the Traversal
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../server/" title="JanusGraph Server" class="md-nav__link">
      JanusGraph Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployment/" title="Deployment Scenarios" class="md-nav__link">
      Deployment Scenarios
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configured-graph-factory/" title="ConfiguredGraphFactory" class="md-nav__link">
      ConfiguredGraphFactory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../multi-node/" title="Things to Consider in a Multi-Node JanusGraph Cluster" class="md-nav__link">
      Things to Consider in a Multi-Node JanusGraph Cluster
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../index-performance/" title="Indexing for Better Performance" class="md-nav__link">
      Indexing for Better Performance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../transactions/" title="Transactions" class="md-nav__link">
      Transactions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cache/" title="JanusGraph Cache" class="md-nav__link">
      JanusGraph Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../transaction-log/" title="Transaction Log" class="md-nav__link">
      Transaction Log
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration-reference/" title="Configuration Reference" class="md-nav__link">
      Configuration Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example-config/" title="Config Example" class="md-nav__link">
      Config Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../common-questions/" title="Common Questions" class="md-nav__link">
      Common Questions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../technical-limitations/" title="Technical Limitations" class="md-nav__link">
      Technical Limitations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Storage Backends
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Storage Backends
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage-backend/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage-backend/cassandra/" title="Apache Cassandra" class="md-nav__link">
      Apache Cassandra
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage-backend/hbase/" title="Apache HBase" class="md-nav__link">
      Apache HBase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage-backend/bigtable/" title="Google Cloud Bigtable" class="md-nav__link">
      Google Cloud Bigtable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage-backend/bdb/" title="Oracle Berkeley DB Java Edition" class="md-nav__link">
      Oracle Berkeley DB Java Edition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../storage-backend/inmemorybackend/" title="InMemory Storage Backend" class="md-nav__link">
      InMemory Storage Backend
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Index Backends
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Index Backends
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/search-predicates/" title="Search Predicates and Data Types" class="md-nav__link">
      Search Predicates and Data Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/text-search/" title="Index Parameters and Full-Text Search" class="md-nav__link">
      Index Parameters and Full-Text Search
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/field-mapping/" title="Field Mapping" class="md-nav__link">
      Field Mapping
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/direct-index-query/" title="Direct Index Query" class="md-nav__link">
      Direct Index Query
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/elasticsearch/" title="Elasticsearch" class="md-nav__link">
      Elasticsearch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/solr/" title="Apache Solr" class="md-nav__link">
      Apache Solr
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/lucene/" title="Apache Lucene" class="md-nav__link">
      Apache Lucene
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Advanced Topics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Advanced Topics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/advschema/" title="Advanced Schema" class="md-nav__link">
      Advanced Schema
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/eventual-consistency/" title="Eventually-Consistent Storage Backends" class="md-nav__link">
      Eventually-Consistent Storage Backends
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/recovery/" title="Failure & Recovery" class="md-nav__link">
      Failure & Recovery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/index-admin/" title="Index Management" class="md-nav__link">
      Index Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/bulk-loading/" title="Bulk Loading" class="md-nav__link">
      Bulk Loading
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/partitioning/" title="Graph Partitioning" class="md-nav__link">
      Graph Partitioning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/serializer/" title="Datatype and Attribute Serializer Configuration" class="md-nav__link">
      Datatype and Attribute Serializer Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/hadoop/" title="JanusGraph with TinkerPop’s Hadoop-Gremlin" class="md-nav__link">
      JanusGraph with TinkerPop’s Hadoop-Gremlin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/monitoring/" title="Monitoring JanusGraph" class="md-nav__link">
      Monitoring JanusGraph
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/migrating/" title="Migrating from Titan" class="md-nav__link">
      Migrating from Titan
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/data-model/" title="JanusGraph Data model" class="md-nav__link">
      JanusGraph Data model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/janusgraph-bus/" title="JanusGraph Bus" class="md-nav__link">
      JanusGraph Bus
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Connecting to JanusGraph
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Connecting to JanusGraph
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting/java/" title="Using Java" class="md-nav__link">
      Using Java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting/python/" title="Using Python" class="md-nav__link">
      Using Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting/dotnet/" title="Using .Net" class="md-nav__link">
      Using .Net
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../development/" title="Development" class="md-nav__link">
      Development
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../appendices/" title="Appendices" class="md-nav__link">
      Appendices
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introductory-traversals" title="Introductory Traversals" class="md-nav__link">
    Introductory Traversals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iterating-the-traversal" title="Iterating the Traversal" class="md-nav__link">
    Iterating the Traversal
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/janusgraph/janusgraph/edit/v0.2/docs/basics/gremlin.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="gremlin-query-language">Gremlin Query Language</h1>
<p><img alt="gremlin" src="http://tinkerpop.apache.org/docs/3.2.9/images/gremlin-logo.png" /></p>
<p><a href="http://tinkerpop.apache.org/gremlin.html">Gremlin</a> is JanusGraph’s
query language used to retrieve data from and modify data in the graph.
Gremlin is a path-oriented language which succinctly expresses complex
graph traversals and mutation operations. Gremlin is a <a href="http://en.wikipedia.org/wiki/Functional_programming">functional
language</a> whereby
traversal operators are chained together to form path-like expressions.
For example, "from Hercules, traverse to his father and then his
father’s father and return the grandfather’s name."</p>
<p>Gremlin is a component of <a href="http://tinkerpop.apache.org">Apache
TinkerPop</a>. It is developed independently
from JanusGraph and is supported by most graph databases. By building
applications on top of JanusGraph through the Gremlin query language,
users avoid vendor-lock in because their application can be migrated to
other graph databases supporting Gremlin.</p>
<p>This section is a brief overview of the Gremlin query language. For more
information on Gremlin, refer to the following resources:</p>
<ul>
<li>
<p><a href="http://tinkerpop.apache.org/docs/3.2.9/reference/">Complete Gremlin Manual</a>: Reference manual for all of the Gremlin steps.</p>
</li>
<li>
<p><a href="http://tinkerpop.apache.org/docs/3.2.9/tutorials/the-gremlin-console/">Gremlin Console Tutorial</a>: Learn how to use the Gremlin Console effectively to traverse and analyze a graph interactively.</p>
</li>
<li>
<p><a href="tinkerpop.apache.org/docs/3.2.9/recipes/">Gremlin Recipes</a>: A collection of best practices and common traversal patterns for Gremlin.</p>
</li>
<li>
<p><a href="http://tinkerpop.apache.org/index.html#language-drivers">Gremlin Language Drivers</a>:
    Connect to a Gremlin Server with different programming languages,
    including Go, JavaScript, .NET/C#, PHP, Python, Ruby, Scala, and
    TypeScript.</p>
</li>
<li>
<p><a href="http://tinkerpop.apache.org/docs/3.2.9/tutorials/gremlin-language-variants/">Gremlin Language Variants</a>: Learn how to embed Gremlin in a host programming language.</p>
</li>
<li>
<p><a href="http://sql2gremlin.com">Gremlin for SQL developers</a>: Learn Gremlin
    using typical patterns found when querying data with SQL.</p>
</li>
</ul>
<p>In addition to these resources, <a href="../../connecting/">Connecting to JanusGraph</a> explains how Gremlin
can be used in different programming languages to query a JanusGraph
Server.</p>
<h2 id="introductory-traversals">Introductory Traversals</h2>
<p>A Gremlin query is a chain of operations/functions that are evaluated
from left to right. A simple grandfather query is provided below over
the <em>Graph of the Gods</em> dataset discussed in <a href="../..#getting-started">Getting Started</a>.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s1">&#39;father&#39;</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s1">&#39;father&#39;</span><span class="o">).</span><span class="na">values</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="n">saturn</span>
</pre></div>
</td></tr></table></p>
<p>The query above can be read:</p>
<ol>
<li><code>g</code>: for the current graph traversal.</li>
<li><code>V</code>: for all vertices in the graph</li>
<li><code>has('name', 'hercules')</code>: filters the vertices down to those with name property "hercules" (there is only one).</li>
<li><code>out('father')</code>: traverse outgoing father edge’s from Hercules.</li>
<li>‘out('father')`: traverse outgoing father edge’s from Hercules’ father’s vertex (i.e. Jupiter).</li>
<li><code>name</code>: get the name property of the "hercules" vertex’s grandfather.</li>
</ol>
<p>Taken together, these steps form a path-like traversal query. Each step
can be decomposed and its results demonstrated. This style of building
up a traversal/query is useful when constructing larger, complex query
chains.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span>
<span class="o">==&gt;</span><span class="n">graphtraversalsource</span><span class="o">[</span><span class="n">janusgraph</span><span class="o">[</span><span class="nl">cql:</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">],</span> <span class="n">standard</span><span class="o">]</span>
<span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="n">v</span><span class="o">[</span><span class="mi">24</span><span class="o">]</span>
<span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s1">&#39;father&#39;</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="n">v</span><span class="o">[</span><span class="mi">16</span><span class="o">]</span>
<span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s1">&#39;father&#39;</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s1">&#39;father&#39;</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="n">v</span><span class="o">[</span><span class="mi">20</span><span class="o">]</span>
<span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s1">&#39;father&#39;</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s1">&#39;father&#39;</span><span class="o">).</span><span class="na">values</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="n">saturn</span>
</pre></div>
</td></tr></table>

<p>For a sanity check, it is usually good to look at the properties of each
return, not the assigned long id.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">).</span><span class="na">values</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="n">hercules</span>
<span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s1">&#39;father&#39;</span><span class="o">).</span><span class="na">values</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="n">jupiter</span>
<span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s1">&#39;father&#39;</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s1">&#39;father&#39;</span><span class="o">).</span><span class="na">values</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="n">saturn</span>
</pre></div>
</td></tr></table></p>
<p>Note the related traversal that shows the entire father family tree
branch of Hercules. This more complicated traversal is provided in order
to demonstrate the flexibility and expressivity of the language. A
competent grasp of Gremlin provides the JanusGraph user the ability to
fluently navigate the underlying graph structure.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">).</span><span class="na">repeat</span><span class="o">(</span><span class="n">out</span><span class="o">(</span><span class="s1">&#39;father&#39;</span><span class="o">)).</span><span class="na">emit</span><span class="o">().</span><span class="na">values</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="n">jupiter</span>
<span class="o">==&gt;</span><span class="n">saturn</span>
</pre></div>
</td></tr></table></p>
<p>Some more traversal examples are provided below.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">hercules</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;hercules&#39;</span><span class="o">).</span><span class="na">next</span><span class="o">()</span>
<span class="o">==&gt;</span><span class="n">v</span><span class="o">[</span><span class="mi">1536</span><span class="o">]</span>
<span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">(</span><span class="n">hercules</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s1">&#39;father&#39;</span><span class="o">,</span> <span class="s1">&#39;mother&#39;</span><span class="o">).</span><span class="na">label</span><span class="o">()</span>
<span class="o">==&gt;</span><span class="n">god</span>
<span class="o">==&gt;</span><span class="n">human</span>
<span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">(</span><span class="n">hercules</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s1">&#39;battled&#39;</span><span class="o">).</span><span class="na">label</span><span class="o">()</span>
<span class="o">==&gt;</span><span class="n">monster</span>
<span class="o">==&gt;</span><span class="n">monster</span>
<span class="o">==&gt;</span><span class="n">monster</span>
<span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">(</span><span class="n">hercules</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s1">&#39;battled&#39;</span><span class="o">).</span><span class="na">valueMap</span><span class="o">()</span>
<span class="o">==&gt;{</span><span class="n">name</span><span class="o">=</span><span class="n">nemean</span><span class="o">}</span>
<span class="o">==&gt;{</span><span class="n">name</span><span class="o">=</span><span class="n">hydra</span><span class="o">}</span>
<span class="o">==&gt;{</span><span class="n">name</span><span class="o">=</span><span class="n">cerberus</span><span class="o">}</span>
</pre></div>
</td></tr></table>
Each step (denoted by a separating .) is a function that operates on the objects emitted from the previous step. There are numerous steps in the Gremlin language (see <a href="http://tinkerpop.apache.org/docs/3.2.9/reference/#graph-traversal-steps">Gremlin Steps</a>). By simply changing a step or order of the steps, different traversal semantics are enacted. The example below returns the name of all the people that have battled the same monsters as Hercules who themselves are not Hercules (i.e. "co-battlers" or perhaps, "allies").</p>
<p>Given that <em>The Graph of the Gods</em> only has one battler (Hercules),
another battler (for the sake of example) is added to the graph with
Gremlin showcasing how vertices and edges are added to the graph.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">theseus</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">addVertex</span><span class="o">(</span><span class="s1">&#39;human&#39;</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="n">v</span><span class="o">[</span><span class="mi">3328</span><span class="o">]</span>
<span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">theseus</span><span class="o">.</span><span class="na">property</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;theseus&#39;</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="kc">null</span>
<span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">cerberus</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;cerberus&#39;</span><span class="o">).</span><span class="na">next</span><span class="o">()</span>
<span class="o">==&gt;</span><span class="n">v</span><span class="o">[</span><span class="mi">2816</span><span class="o">]</span>
<span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">battle</span> <span class="o">=</span> <span class="n">theseus</span><span class="o">.</span><span class="na">addEdge</span><span class="o">(</span><span class="s1">&#39;battled&#39;</span><span class="o">,</span> <span class="n">cerberus</span><span class="o">,</span> <span class="s1">&#39;time&#39;</span><span class="o">,</span> <span class="mi">22</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="n">e</span><span class="o">[</span><span class="mi">7</span><span class="n">eo</span><span class="o">-</span><span class="mi">2</span><span class="n">kg</span><span class="o">-</span><span class="n">iz9</span><span class="o">-</span><span class="mi">268</span><span class="o">][</span><span class="mi">3328</span><span class="o">-</span><span class="n">battled</span><span class="o">-&gt;</span><span class="mi">2816</span><span class="o">]</span>
<span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">battle</span><span class="o">.</span><span class="na">values</span><span class="o">(</span><span class="s1">&#39;time&#39;</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="mi">22</span>
</pre></div>
</td></tr></table></p>
<p>When adding a vertex, an optional vertex label can be provided. An edge
label must be specified when adding edges. Properties as key-value pairs
can be set on both vertices and edges. When a property key is defined
with SET or LIST cardinality, <code>addProperty</code> must be used when adding a
respective property to a vertex.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">(</span><span class="n">hercules</span><span class="o">).</span><span class="na">as</span><span class="o">(</span><span class="s1">&#39;h&#39;</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s1">&#39;battled&#39;</span><span class="o">).</span><span class="na">in</span><span class="o">(</span><span class="s1">&#39;battled&#39;</span><span class="o">).</span><span class="na">where</span><span class="o">(</span><span class="n">neq</span><span class="o">(</span><span class="s1">&#39;h&#39;</span><span class="o">)).</span><span class="na">values</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="n">theseus</span>
</pre></div>
</td></tr></table></p>
<p>The example above has 4 chained functions: <code>out</code>, <code>in</code>, <code>except</code>, and
<code>values</code> (i.e. <code>name</code> is shorthand for <code>values('name')</code>). The function
signatures of each are itemized below, where <code>V</code> is vertex and <code>U</code> is
any object, where <code>V</code> is a subset of <code>U</code>.</p>
<ol>
<li><code>out: V -&gt; V</code></li>
<li><code>in: V -&gt; V</code></li>
<li><code>except: U -&gt; U</code></li>
<li><code>values: V -&gt; U</code></li>
</ol>
<p>When chaining together functions, the incoming type must match the
outgoing type, where <code>U</code> matches anything. Thus, the "co-battled/ally"
traversal above is correct.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Gremlin overview presented in this section focused on the
Gremlin-Groovy language implementation used in the Gremlin Console.
Refer to <a href="../../connecting/">Connecting to JanusGraph</a> for information about connecting to
JanusGraph with other languages than Groovy and independent of the
Gremlin Console.</p>
</div>
<h2 id="iterating-the-traversal">Iterating the Traversal</h2>
<p>One convenient feature of the Gremlin Console is that it automatically iterates all results from a query executed from the gremlin&gt; prompt. This works well within the <a href="https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop">REPL</a> environment as it shows you the results as a String. As you transition towards writing a Gremlin application, it is important to understand how to iterate a traversal explicitly because your application’s traversals will not iterate automatically. These are some of the common ways to iterate the <a href="http://tinkerpop.apache.org/javadocs/3.2.9/full/org/apache/tinkerpop/gremlin/process/traversal/Traversal.html">Traversal</a>:</p>
<ul>
<li><code>iterate()</code> - Zero results are expected or can be ignored.</li>
<li><code>next()</code> - Get one result. Make sure to check <code>hasNext()</code> first.</li>
<li><code>next(int n)</code> - Get the next <code>n</code> results. Make sure to check <code>hasNext()</code> first.</li>
<li><code>toList()</code> - Get all results as a list. If there are no results, an empty list is returned.</li>
</ul>
<p>A Java code example is shown below to demonstrate these concepts:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Traversal</span> <span class="n">t</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="s">&quot;pluto&quot;</span><span class="o">);</span> <span class="c1">// Define a traversal</span>
<span class="c1">// Note the traversal is not executed/iterated yet</span>
<span class="n">Vertex</span> <span class="n">pluto</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="k">if</span> <span class="o">(</span><span class="n">t</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span> <span class="c1">// Check if results are available</span>
    <span class="n">pluto</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="s">&quot;pluto&quot;</span><span class="o">).</span><span class="na">next</span><span class="o">();</span> <span class="c1">// Get one result</span>
    <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">(</span><span class="n">pluto</span><span class="o">).</span><span class="na">drop</span><span class="o">().</span><span class="na">iterate</span><span class="o">();</span> <span class="c1">// Execute a traversal to drop pluto from graph</span>
<span class="o">}</span>
<span class="c1">// Note the traversal can be cloned for reuse</span>
<span class="n">Traversal</span> <span class="n">tt</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="na">asAdmin</span><span class="o">().</span><span class="na">clone</span><span class="o">();</span>
<span class="k">if</span> <span class="o">(</span><span class="n">tt</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;pluto was not dropped!&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Vertex</span><span class="o">&gt;</span> <span class="n">gods</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">().</span><span class="na">hasLabel</span><span class="o">(</span><span class="s">&quot;god&quot;</span><span class="o">).</span><span class="na">toList</span><span class="o">();</span> <span class="c1">// Find all the gods</span>
</pre></div>
</td></tr></table></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../schema/" title="Schema and Data Modeling" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Schema and Data Modeling
              </span>
            </div>
          </a>
        
        
          <a href="../server/" title="JanusGraph Server" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                JanusGraph Server
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 JanusGraph Authors. All rights reserved.<br> The Linux Foundation has registered trademarks and uses trademarks. For a list of<br> trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage">Trademark Usage</a> page.<br> Cassandra, Groovy, HBase, Hadoop, Lucene, Solr, and TinkerPop are trademarks of the Apache Software Foundation.<br> Berkeley DB and Berkeley DB Java Edition are trademarks of Oracle.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../theme/js/structor-menu.js"></script>
      
    
  </body>
</html>