



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Apache Cassandra - JanusGraph</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#4caf50">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../theme/structor-menu.css">
    
      <link rel="stylesheet" href="../../theme/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="green" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#apache-cassandra" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="JanusGraph" class="md-header-nav__button md-logo">
          
            <img src="../../janusgraph-logomark.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              JanusGraph
            </span>
            <span class="md-header-nav__topic">
              
                Apache Cassandra
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/janusgraph/janusgraph/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    JanusGraph
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="JanusGraph" class="md-nav__button md-logo">
      
        <img src="../../janusgraph-logomark.svg" width="48" height="48">
      
    </a>
    JanusGraph
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/janusgraph/janusgraph/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    JanusGraph
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      JanusGraph Basics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        JanusGraph Basics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/schema/" title="Schema and Data Modeling" class="md-nav__link">
      Schema and Data Modeling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/gremlin/" title="Gremlin Query Language" class="md-nav__link">
      Gremlin Query Language
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/server/" title="JanusGraph Server" class="md-nav__link">
      JanusGraph Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/deployment/" title="Deployment Scenarios" class="md-nav__link">
      Deployment Scenarios
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/configured-graph-factory/" title="ConfiguredGraphFactory" class="md-nav__link">
      ConfiguredGraphFactory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/multi-node/" title="Things to Consider in a Multi-Node JanusGraph Cluster" class="md-nav__link">
      Things to Consider in a Multi-Node JanusGraph Cluster
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/index-performance/" title="Indexing for Better Performance" class="md-nav__link">
      Indexing for Better Performance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/transactions/" title="Transactions" class="md-nav__link">
      Transactions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/cache/" title="JanusGraph Cache" class="md-nav__link">
      JanusGraph Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/transaction-log/" title="Transaction Log" class="md-nav__link">
      Transaction Log
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/configuration-reference/" title="Configuration Reference" class="md-nav__link">
      Configuration Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/example-config/" title="Config Example" class="md-nav__link">
      Config Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/common-questions/" title="Common Questions" class="md-nav__link">
      Common Questions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../basics/technical-limitations/" title="Technical Limitations" class="md-nav__link">
      Technical Limitations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Storage Backends
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Storage Backends
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Apache Cassandra
      </label>
    
    <a href="./" title="Apache Cassandra" class="md-nav__link md-nav__link--active">
      Apache Cassandra
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cassandra-storage-backend" title="Cassandra Storage Backend" class="md-nav__link">
    Cassandra Storage Backend
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#local-server-mode" title="Local Server Mode" class="md-nav__link">
    Local Server Mode
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#local-container-mode" title="Local Container Mode" class="md-nav__link">
    Local Container Mode
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#remote-server-mode" title="Remote Server Mode" class="md-nav__link">
    Remote Server Mode
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#remote-server-mode-with-gremlin-server" title="Remote Server Mode with Gremlin Server" class="md-nav__link">
    Remote Server Mode with Gremlin Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#janusgraph-embedded-mode" title="JanusGraph Embedded Mode" class="md-nav__link">
    JanusGraph Embedded Mode
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cassandra-specific-configuration" title="Cassandra Specific Configuration" class="md-nav__link">
    Cassandra Specific Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#global-graph-operations" title="Global Graph Operations" class="md-nav__link">
    Global Graph Operations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-on-amazon-ec2" title="Deploying on Amazon EC2" class="md-nav__link">
    Deploying on Amazon EC2
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-cassandra-cluster" title="Setup Cassandra Cluster" class="md-nav__link">
    Setup Cassandra Cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-security-group" title="Setting up Security Group" class="md-nav__link">
    Setting up Security Group
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launch-datastax-cassandra-ami" title="Launch DataStax Cassandra AMI" class="md-nav__link">
    Launch DataStax Cassandra AMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-successful-instance-launch" title="Verify Successful Instance Launch" class="md-nav__link">
    Verify Successful Instance Launch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launch-janusgraph-instances" title="Launch JanusGraph Instances" class="md-nav__link">
    Launch JanusGraph Instances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-janusgraph-instance-on-amazon-linux-ami" title="Example JanusGraph Instance on Amazon Linux AMI" class="md-nav__link">
    Example JanusGraph Instance on Amazon Linux AMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-to-cassandra-cluster-in-ec2-from-outside-ec2" title="Connect to Cassandra cluster in EC2 from outside EC2" class="md-nav__link">
    Connect to Cassandra cluster in EC2 from outside EC2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hbase/" title="Apache HBase" class="md-nav__link">
      Apache HBase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bigtable/" title="Google Cloud Bigtable" class="md-nav__link">
      Google Cloud Bigtable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bdb/" title="Oracle Berkeley DB Java Edition" class="md-nav__link">
      Oracle Berkeley DB Java Edition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../inmemorybackend/" title="InMemory Storage Backend" class="md-nav__link">
      InMemory Storage Backend
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Index Backends
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Index Backends
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/search-predicates/" title="Search Predicates and Data Types" class="md-nav__link">
      Search Predicates and Data Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/text-search/" title="Index Parameters and Full-Text Search" class="md-nav__link">
      Index Parameters and Full-Text Search
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/field-mapping/" title="Field Mapping" class="md-nav__link">
      Field Mapping
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/direct-index-query/" title="Direct Index Query" class="md-nav__link">
      Direct Index Query
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/elasticsearch/" title="Elasticsearch" class="md-nav__link">
      Elasticsearch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/solr/" title="Apache Solr" class="md-nav__link">
      Apache Solr
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index-backend/lucene/" title="Apache Lucene" class="md-nav__link">
      Apache Lucene
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Advanced Topics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Advanced Topics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/advschema/" title="Advanced Schema" class="md-nav__link">
      Advanced Schema
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/eventual-consistency/" title="Eventually-Consistent Storage Backends" class="md-nav__link">
      Eventually-Consistent Storage Backends
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/recovery/" title="Failure & Recovery" class="md-nav__link">
      Failure & Recovery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/index-admin/" title="Index Management" class="md-nav__link">
      Index Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/bulk-loading/" title="Bulk Loading" class="md-nav__link">
      Bulk Loading
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/partitioning/" title="Graph Partitioning" class="md-nav__link">
      Graph Partitioning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/serializer/" title="Datatype and Attribute Serializer Configuration" class="md-nav__link">
      Datatype and Attribute Serializer Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/hadoop/" title="JanusGraph with TinkerPop’s Hadoop-Gremlin" class="md-nav__link">
      JanusGraph with TinkerPop’s Hadoop-Gremlin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/monitoring/" title="Monitoring JanusGraph" class="md-nav__link">
      Monitoring JanusGraph
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/migrating/" title="Migrating from Titan" class="md-nav__link">
      Migrating from Titan
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/data-model/" title="JanusGraph Data model" class="md-nav__link">
      JanusGraph Data model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced-topics/janusgraph-bus/" title="JanusGraph Bus" class="md-nav__link">
      JanusGraph Bus
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Connecting to JanusGraph
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Connecting to JanusGraph
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting/java/" title="Using Java" class="md-nav__link">
      Using Java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting/python/" title="Using Python" class="md-nav__link">
      Using Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting/dotnet/" title="Using .Net" class="md-nav__link">
      Using .Net
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../development/" title="Development" class="md-nav__link">
      Development
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../appendices/" title="Appendices" class="md-nav__link">
      Appendices
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cassandra-storage-backend" title="Cassandra Storage Backend" class="md-nav__link">
    Cassandra Storage Backend
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#local-server-mode" title="Local Server Mode" class="md-nav__link">
    Local Server Mode
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#local-container-mode" title="Local Container Mode" class="md-nav__link">
    Local Container Mode
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#remote-server-mode" title="Remote Server Mode" class="md-nav__link">
    Remote Server Mode
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#remote-server-mode-with-gremlin-server" title="Remote Server Mode with Gremlin Server" class="md-nav__link">
    Remote Server Mode with Gremlin Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#janusgraph-embedded-mode" title="JanusGraph Embedded Mode" class="md-nav__link">
    JanusGraph Embedded Mode
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cassandra-specific-configuration" title="Cassandra Specific Configuration" class="md-nav__link">
    Cassandra Specific Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#global-graph-operations" title="Global Graph Operations" class="md-nav__link">
    Global Graph Operations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-on-amazon-ec2" title="Deploying on Amazon EC2" class="md-nav__link">
    Deploying on Amazon EC2
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-cassandra-cluster" title="Setup Cassandra Cluster" class="md-nav__link">
    Setup Cassandra Cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-security-group" title="Setting up Security Group" class="md-nav__link">
    Setting up Security Group
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launch-datastax-cassandra-ami" title="Launch DataStax Cassandra AMI" class="md-nav__link">
    Launch DataStax Cassandra AMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-successful-instance-launch" title="Verify Successful Instance Launch" class="md-nav__link">
    Verify Successful Instance Launch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launch-janusgraph-instances" title="Launch JanusGraph Instances" class="md-nav__link">
    Launch JanusGraph Instances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-janusgraph-instance-on-amazon-linux-ami" title="Example JanusGraph Instance on Amazon Linux AMI" class="md-nav__link">
    Example JanusGraph Instance on Amazon Linux AMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-to-cassandra-cluster-in-ec2-from-outside-ec2" title="Connect to Cassandra cluster in EC2 from outside EC2" class="md-nav__link">
    Connect to Cassandra cluster in EC2 from outside EC2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/janusgraph/janusgraph/edit/v0.2/docs/storage-backend/cassandra.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="apache-cassandra">Apache Cassandra</h1>
<blockquote>
<p>The Apache Cassandra database is the right choice when you need
scalability and high availability without compromising performance.
Linear scalability and proven fault-tolerance on commodity hardware or
cloud infrastructure make it the perfect platform for mission-critical
data. Cassandra’s support for replicating across multiple datacenters
is best-in-class, providing lower latency for your users and the peace
of mind of knowing that you can survive regional outages. The largest
known Cassandra cluster has over 300 TB of data in over 400 machines.</p>
<p>—  <a href="http://cassandra.apache.org/">Apache Cassandra Homepage</a></p>
</blockquote>
<p>The following sections outline the various ways in which JanusGraph can
be used in concert with Apache Cassandra.</p>
<h2 id="cassandra-storage-backend">Cassandra Storage Backend</h2>
<p>JanusGraph provides the following backends for use with Cassandra:</p>
<ul>
<li><code>cql</code> - CQL based driver. This is the recommended driver.</li>
<li><code>cassandrathrift</code> - JanusGraph’s Thrift connection pool driver</li>
<li><code>cassandra</code> - <a href="https://github.com/Netflix/astyanax">Astyanax</a>
    driver. The Astyanax project is
    <a href="https://medium.com/netflix-techblog/astyanax-retiring-an-old-friend-6cca1de9ac4">retired</a>.</li>
<li><code>embeddedcassandra</code> - Embedded driver for running Cassandra and
    JanusGraph within the same JVM</li>
</ul>
<p>Cassandra has two protocols for clients to use: CQL and Thrift. Thrift
was the original interface, however it was deprecated starting with
Cassandra 2.1. The core of JanusGraph was originally written before the
deprecation of Thrift, and it has several classes that support Thrift.
With Cassandra 4.0, Thrift support will be removed in Cassandra.
JanusGraph users are recommended to use the <code>cql</code> storage backend.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you plan to use a Thrift-based driver and you are using Cassandra
2.2 or higher, you need to explicitly enable Thrift so that JanusGraph
can connect to the cluster. Do so by running
<code>./bin/nodetool enablethrift</code> on every Cassandra node.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If security is enabled on Cassandra, the user must have
<code>CREATE permission on &lt;all keyspaces&gt;</code>, otherwise the keyspace must be
created ahead of time by an administrator including the required
tables or the user must have
<code>CREATE permission on &lt;the configured keyspace&gt;</code>. The create table
file containing the required tables is located in
<code>conf/cassandra/cassandraTables.cql</code>. Please define your keyspace
before executing it.</p>
</div>
<h2 id="local-server-mode">Local Server Mode</h2>
<p><img alt="" src="../modes-local.png" /></p>
<p>Cassandra can be run as a standalone database on the same local host as
JanusGraph and the end-user application. In this model, JanusGraph and
Cassandra communicate with one another via a <code>localhost</code> socket. Running
JanusGraph over Cassandra requires the following setup steps:</p>
<ol>
<li><a href="http://cassandra.apache.org/download/">Download Cassandra</a>, unpack
    it, and set filesystem paths in <code>conf/cassandra.yaml</code> and
    <code>conf/log4j-server.properties</code></li>
<li>Connecting Gremlin Server to Cassandra using the default
    configuration files provided in the pre-packaged distribution
    requires that Cassandra Thrift is enabled. To enable Cassandra
    Thrift open <code>conf/cassandra.yaml</code> and update <code>start_rpc: false</code> to
    <code>start_rpc: true</code>. If Cassandra is already running Thrift can be
    started manually with <code>bin/nodetool enablethrift</code>. the Thrift status
    can be verified with <code>bin/nodetool</code> statusthrift.</li>
<li>
<p>Start Cassandra by invoking <code>bin/cassandra -f</code> on the command line
    in the directory where Cassandra was unpacked. Read output to check
    that Cassandra started successfully.</p>
<p>Now, you can create a Cassandra JanusGraph as follows<br />
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">JanusGraph</span> <span class="n">g</span> <span class="o">=</span> <span class="n">JanusGraphFactory</span><span class="o">.</span><span class="na">build</span><span class="o">().</span>
<span class="n">set</span><span class="o">(</span><span class="s">&quot;storage.backend&quot;</span><span class="o">,</span> <span class="s">&quot;cql&quot;</span><span class="o">).</span>
<span class="n">set</span><span class="o">(</span><span class="s">&quot;storage.hostname&quot;</span><span class="o">,</span> <span class="s">&quot;127.0.0.1&quot;</span><span class="o">).</span>
<span class="n">open</span><span class="o">();</span>
</pre></div>
</td></tr></table></p>
</li>
</ol>
<p>In the Gremlin Console, you can not define the type of the variables
<code>conf</code> and <code>g</code>. Therefore, simply leave off the type declaration.</p>
<h2 id="local-container-mode">Local Container Mode</h2>
<p>Cassandra does not have a native install for Windows or OSX. One of the
easiest ways to run Cassandra on OSX, Windows, or Linux is to use a
Docker Container. You can download and run Cassandra with a single
<a href="https://www.docker.com/">Docker</a> command. It is important to install a
version that is supported by the version of JanusGraph you intend to
use. The compatible versions can be found under the Tested Compatibility
section of the specific release on the <a href="https://github.com/JanusGraph/janusgraph/releases">Releases
page</a>. The <a href="https://hub.docker.com/_/cassandra/">Cassandra
Docker Hub page</a> can be referenced
for the available versions and useful commands. In the command below an
environment variable is being set to enable Cassandra Thrift with
<code>-e CASSANDRA_START_RPC=true</code>. A description of the ports can be found
<a href="https://docs.datastax.com/en/cassandra/latest/cassandra/configuration/secureFireWall.html">here</a>.
Port 9160 is used for the Thrift client API. Port 9042 is for CQL native
clients. Ports 7000, 7001 and 7099 are for inter-node communication.
Version 3.11 of Cassandra was the latest compatible version for
JanusGraph 0.2.0 and is specified in the reference command below.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>docker run --name jg-cassandra -d -e <span class="nv">CASSANDRA_START_RPC</span><span class="o">=</span><span class="nb">true</span> -p <span class="m">9160</span>:9160 <span class="se">\</span>
  -p <span class="m">9042</span>:9042 -p <span class="m">7199</span>:7199 -p <span class="m">7001</span>:7001 -p <span class="m">7000</span>:7000 cassandra:3.11
</pre></div>
</td></tr></table>

<h2 id="remote-server-mode">Remote Server Mode</h2>
<p><img alt="" src="../modes-distributed.png" /></p>
<p>When the graph needs to scale beyond the confines of a single machine,
then Cassandra and JanusGraph are logically separated into different
machines. In this model, the Cassandra cluster maintains the graph
representation and any number of JanusGraph instances maintain
socket-based read/write access to the Cassandra cluster. The end-user
application can directly interact with JanusGraph within the same JVM as
JanusGraph.</p>
<p>For example, suppose we have a running Cassandra cluster where one of
the machines has the IP address 77.77.77.77, then connecting JanusGraph
with the cluster is accomplished as follows (comma separate IP addresses
to reference more than one machine):
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">JanusGraph</span> <span class="n">graph</span> <span class="o">=</span> <span class="n">JanusGraphFactory</span><span class="o">.</span><span class="na">build</span><span class="o">().</span>
  <span class="n">set</span><span class="o">(</span><span class="s">&quot;storage.backend&quot;</span><span class="o">,</span> <span class="s">&quot;cql&quot;</span><span class="o">).</span>
  <span class="n">set</span><span class="o">(</span><span class="s">&quot;storage.hostname&quot;</span><span class="o">,</span> <span class="s">&quot;77.77.77.77&quot;</span><span class="o">).</span>
  <span class="n">open</span><span class="o">();</span>
</pre></div>
</td></tr></table></p>
<p>In the Gremlin Console, you can not define the type of the variables
<code>conf</code> and <code>g</code>. Therefore, simply leave off the type declaration.</p>
<h2 id="remote-server-mode-with-gremlin-server">Remote Server Mode with Gremlin Server</h2>
<p><img alt="" src="../modes-rexster.png" /></p>
<p>Gremlin Server can be wrapped around each JanusGraph instance defined in
the previous subsection. In this way, the end-user application need not
be a Java-based application as it can communicate with Gremlin Server as
a client. This type of deployment is great for polyglot architectures
where various components written in different languages need to
reference and compute on the graph.</p>
<p>Start Gremlin Server using <code>bin/gremlin-server.sh</code> and then in an
external Gremlin Console session using <code>bin/gremlin.sh</code> you can send
Gremlin commands over the wire:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">:</span><span class="n">plugin</span> <span class="n">use</span> <span class="n">tinkerpop</span><span class="o">.</span><span class="na">server</span>
<span class="o">:</span><span class="n">remote</span> <span class="n">connect</span> <span class="n">tinkerpop</span><span class="o">.</span><span class="na">server</span> <span class="n">conf</span><span class="o">/</span><span class="n">remote</span><span class="o">.</span><span class="na">yaml</span>
<span class="o">:&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">addV</span><span class="o">()</span>
</pre></div>
</td></tr></table></p>
<p>In this case, each Gremlin Server would be configured to connect to the
Cassandra cluster. The following shows the graph specific fragment of
the Gremlin Server configuration. Refer to <a href="../../basics/server/">JanusGraph Server</a> for a complete
example and more information on how to configure the server.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nn">...</span>
<span class="nt">graphs</span><span class="p">:</span> <span class="p p-Indicator">{</span>
<span class="nt">  g</span><span class="p">:</span> <span class="nv">conf/janusgraph-cql.properties</span>
<span class="p p-Indicator">}</span>
<span class="nt">plugins</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">janusgraph.imports</span>
<span class="nn">...</span>
</pre></div>
</td></tr></table>

<p>For more information about Gremlin Server see the <a href="http://tinkerpop.apache.org/docs/3.2.9/reference#gremlin-server">Apache TinkerPop
documentation</a></p>
<h2 id="janusgraph-embedded-mode">JanusGraph Embedded Mode</h2>
<p><img alt="" src="../modes-embedded.png" /></p>
<p>Finally, Cassandra can be embedded in JanusGraph, which means, that
JanusGraph and Cassandra run in the same JVM and communicate via in
process calls rather than over the network. This removes the
(de)serialization and network protocol overhead and can therefore lead
to considerable performance improvements. In this deployment mode,
JanusGraph internally starts a cassandra daemon and JanusGraph no longer
connects to an existing cluster but is its own cluster.</p>
<p>To use JanusGraph in embedded mode, simply configure <code>embeddedcassandra</code>
as the storage backend. The configuration options listed below also
apply to embedded Cassandra. In creating a JanusGraph cluster, ensure
that the individual nodes can discover each other via the Gossip
protocol, so setup a JanusGraph-with-Cassandra-embedded cluster much
like you would a stand alone Cassandra cluster. When running JanusGraph
in embedded mode, the Cassandra yaml file is configured using the
additional configuration option <code>storage.conf-file</code>, which specifies the
yaml file as a full url, e.g.
<code>storage.conf-file = file:///home/cassandra.yaml</code>.</p>
<p>When running a cluster with JanusGraph and Cassandra embedded, it is
advisable to expose JanusGraph through the Gremlin Server so that
applications can remotely connect to the JanusGraph graph database and
execute queries.</p>
<p>Note, that running JanusGraph with Cassandra embedded requires GC
tuning. While embedded Cassandra can provide lower latency query
answering, its GC behavior under load is less predictable.</p>
<h2 id="cassandra-specific-configuration">Cassandra Specific Configuration</h2>
<p>Refer to <a href="../../basics/configuration-reference/">Configuration Reference</a> for a complete listing of all Cassandra
specific configuration options in addition to the general JanusGraph
configuration options.</p>
<p>When configuring Cassandra it is recommended to consider the following
Cassandra specific configuration options:</p>
<ul>
<li><strong>read-consistency-level</strong>: Cassandra consistency level for read
    operations</li>
<li><strong>write-consistency-level</strong>: Cassandra consistency level for write
    operations</li>
<li><strong>replication-factor</strong>: The replication factor to use. The higher
    the replication factor, the more robust the graph database is to
    machine failure at the expense of data duplication. <strong>The default
    value should be overwritten for production system to ensure
    robustness. A value of 3 is recommended.</strong> This replication factor
    can only be set when the keyspace is initially created. <strong>On an
    existing keyspace, this value is ignored.</strong></li>
<li><strong>thrift.frame_size_mb</strong>: The maximum frame size to be used by
    thrift for transport. Increase this value when retrieving very large
    result sets. <strong>Only applicable when
    storage.backend=cassandrathrift</strong></li>
<li><strong>keyspace</strong>: The name of the keyspace to store the JanusGraph graph
    in. Allows multiple JanusGraph graphs to co-exist in the same
    Cassandra cluster.</li>
</ul>
<p>For more information on Cassandra consistency levels and acceptable
values, please refer to the <a href="http://wiki.apache.org/cassandra/API10">Cassandra Thrift
API</a>. In general, higher levels
are more consistent and robust but have higher latency.</p>
<h2 id="global-graph-operations">Global Graph Operations</h2>
<p>JanusGraph over Cassandra supports global vertex and edge iteration.
However, note that all these vertices and/or edges will be loaded into
memory which can cause <code>OutOfMemoryException</code>. Use <a href="../../advanced-topics/hadoop/">JanusGraph with TinkerPop’s Hadoop-Gremlin</a> to
iterate over all vertices or edges in large graphs effectively.</p>
<h2 id="deploying-on-amazon-ec2">Deploying on Amazon EC2</h2>
<blockquote>
<p>Amazon Elastic Compute Cloud (Amazon EC2) is a web service that
provides resizable compute capacity in the cloud. It is designed to
make web-scale computing easier for developers.</p>
<p>—  <a href="http://aws.amazon.com/ec2/">Amazon EC2</a></p>
</blockquote>
<p>Follow these steps to setup a Cassandra cluster on EC2 and deploy
JanusGraph over Cassandra. To follow these instructions, you need an
Amazon AWS account with established authentication credentials and some
basic knowledge of AWS and EC2.</p>
<h3 id="setup-cassandra-cluster">Setup Cassandra Cluster</h3>
<p>These instructions for configuring and launching the DataStax Cassandra
Community Edition AMI are based on the DataStax AMI Docs and focus on
aspects relevant for a JanusGraph deployment.</p>
<h3 id="setting-up-security-group">Setting up Security Group</h3>
<ul>
<li>Navigate to the EC2 Console Dashboard, then click on "Security
    Groups" under "Network &amp; Security".</li>
<li>Create a new security group. Click Inbound. Set the "Create a new
    rule" dropdown menu to "Custom TCP rule". Add a rule for port 22
    from source 0.0.0.0/0. Add a rule for ports 1024-65535 from the
    security group members. If you don’t want to open all unprivileged
    ports among security group members, then at least open 7000, 7199,
    and 9160 among security group members. Tip: the "Source" dropdown
    will autocomplete security group identifiers once "sg" is typed in
    the box, so you needn’t have the exact value ready beforehand.</li>
</ul>
<h3 id="launch-datastax-cassandra-ami">Launch DataStax Cassandra AMI</h3>
<ul>
<li>"Launch the <a href="https://aws.amazon.com/amis/datastax-auto-clustering-ami-2-2">DataStax AMI</a>
    in your desired zone</li>
<li>On the Instance Details page of the Request Instances Wizard, set
    "Number of Instances" to your desired number of Cassandra nodes. Set
    "Instance Type" to at least m1.large. We recommend m1.large.</li>
<li>
<p>On the Advanced Instance Options page of the Request Instances
    Wizard, set the "as text" radio button under "User Data", then fill
    this into the text box:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>--clustername [cassandra-cluster-name]
--totalnodes [number-of-instances]
--version community
--opscenter no
</pre></div>
</td></tr></table>
[number-of-instances] in this configuration must match the number of
EC2 instances configured on the previous wizard page.
[cassandra-cluster-name] can be any string used for identification.
For example:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>--clustername janusgraph
--totalnodes 4
--version community
--opscenter no
</pre></div>
</td></tr></table></p>
</li>
<li>
<p>On the Tags page of the Request Instances Wizard you can apply any
    desired configurations. These tags exist only at the EC2
    administrative level and have no effect on the Cassandra daemons'
    configuration or operation.</p>
</li>
<li>On the Create Key Pair page of the Request Instances Wizard, either
    select an existing key pair or create a new one. The PEM file
    containing the private half of the selected key pair will be
    required to connect to these instances.</li>
<li>On the Configure Firewall page of the Request Instances Wizard,
    select the security group created earlier.</li>
<li>Review and launch instances on the final wizard page.</li>
</ul>
<h3 id="verify-successful-instance-launch">Verify Successful Instance Launch</h3>
<ul>
<li>SSH into any Cassandra instance node:
    <code>ssh -i [your-private-key].pem ubuntu@[public-dns-name-of-any-cassandra-instance]</code></li>
<li>Run the Cassandra nodetool <code>nodetool -h 127.0.0.1 ring</code> to inspect
    the state of the Cassandra token ring. You should see as many nodes
    in this command’s output as instances launched in the previous
    steps.</li>
</ul>
<p>Note, that the AMI takes a few minutes to configure each instance. A
shell prompt will appear upon successful configuration when you SSH into
the instance.</p>
<h3 id="launch-janusgraph-instances">Launch JanusGraph Instances</h3>
<p>Launch additional EC2 instances to run JanusGraph which are either
configured in Remote Server Mode or Remote Server Mode with
Gremlin-Server as described above. You only need to note the IP address
of one of the Cassandra cluster instances and configure it as the host
name. The particular EC2 instance to run and the particular
configuration depends on your use case.</p>
<h3 id="example-janusgraph-instance-on-amazon-linux-ami">Example JanusGraph Instance on Amazon Linux AMI</h3>
<ul>
<li>Launch the <a href="http://aws.amazon.com/amazon-linux-ami">Amazon Linux AMI</a> in the same zone of the
    Cassandra cluster. Choose your desired EC2 instance type depending
    on the amount of resources you need. Use the default configuration
    options and select the same Key Pair and Security Group as for the
    Cassandra cluster configured in the previous step.</li>
<li>SSH into the newly created instance via
    <code>ssh -i [your-private-key].pem ec2-user@[public-dns-name-of-the-instance]</code>.
    You may have to wait a little for the instance to launch.</li>
<li><a href="https://github.com/JanusGraph/janusgraph/releases">Download</a> the
    current JanusGraph distribution with <code>wget</code> and unpack the archive
    locally to the home directory. Start the Gremlin Console to verify
    that JanusGraph runs successfully. For more information on how to
    unpack JanusGraph and start the Gremlin Console, please refer to the
    <a href="../..#getting-started">Getting Started guide</a></li>
<li>Create a configuration file with <code>vi janusgraph.properties</code> and add
    the following lines::
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>storage.backend = cql
storage.hostname = [IP-address-of-one-Cassandra-EC2-instance]
</pre></div>
</td></tr></table></li>
</ul>
<p>You may add additional configuration options found on this page or in
<a href="../../basics/configuration-reference/">Configuration Reference</a>.</p>
<ul>
<li>Start the Gremlin Console again and type the following::
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="n">JanusGraphFactory</span><span class="o">.</span><span class="na">open</span><span class="o">(</span><span class="s1">&#39;janusgraph.properties&#39;</span><span class="o">)</span>
<span class="o">==&gt;</span><span class="n">janusgraph</span><span class="o">[</span><span class="nl">cql:</span><span class="o">[</span><span class="n">IP</span><span class="o">-</span><span class="n">address</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">one</span><span class="o">-</span><span class="n">Cassandra</span><span class="o">-</span><span class="n">EC2</span><span class="o">-</span><span class="n">instance</span><span class="o">]]</span>
</pre></div>
</td></tr></table></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You have successfully connected this JanusGraph instance to the
Cassandra cluster and can start to operate on the graph.</p>
</div>
<h3 id="connect-to-cassandra-cluster-in-ec2-from-outside-ec2">Connect to Cassandra cluster in EC2 from outside EC2</h3>
<p>Opening the usual Cassandra ports (9160, 7000, 7199) in the security
group is not enough, because the Cassandra nodes by default broadcast
their ec2-internal IPs, and not their public-facing IPs.</p>
<p>The resulting behavior is that you can open a JanusGraph graph on the
cluster by connecting to port 9160 on any Cassandra node, but all
requests to that graph time out. This is because Cassandra is telling
the client to connect to an unreachable IP.</p>
<p>To fix this, set the "broadcast-address" property for each instance in
/etc/cassandra/cassandra.yaml to its public-facing IP, and restart the
instance. Do this for all nodes in the cluster. Once the cluster comes
back, nodetool reports the correct public-facing IPs to which
connections from the local machine are allowed.</p>
<p>Changing the "broadcast-address" property allows you to connect to the
cluster from outside ec2, but it might also mean that traffic
originating within ec2 will have to round-trip to the internet and back
before it gets to the cluster. So, this approach is only useful for
development and testing.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Introduction
              </span>
            </div>
          </a>
        
        
          <a href="../hbase/" title="Apache HBase" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Apache HBase
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 JanusGraph Authors. All rights reserved.<br> The Linux Foundation has registered trademarks and uses trademarks. For a list of<br> trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage">Trademark Usage</a> page.<br> Cassandra, Groovy, HBase, Hadoop, Lucene, Solr, and TinkerPop are trademarks of the Apache Software Foundation.<br> Berkeley DB and Berkeley DB Java Edition are trademarks of Oracle.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../theme/js/structor-menu.js"></script>
      
    
  </body>
</html>